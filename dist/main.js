(()=>{function e(){let e=document.getElementById("diqt-dict-extension-wrapper");if(null==e){jsFrame=new JSFrame({horizontalAlign:"right"});const o='\n        <div id="diqt-dict-extension-wrapper">\n        <a>\n        <div id="diqt-dict-logged-in-user" style="font-size: 10px;">ã€€</div>\n        </a>\n        <form method="get" action=""><input type="text" name="keyword" id="diqt-dict-search-form"></form>\n        <div id="diqt-dict-search-status" style="text-align: left; color: #6e6e6e;">\n        "<span id="diqt-dict-search-keyword" style="font-size: 12px;"></span>"<span id="diqt-dict-search-status-text"></span>\n        </div>\n        <div id="search-diqt-dict-results"></div>\n        </div>';let r=jsFrame.create({name:"diqt-dict-window",title:"Ctrl + Q ã§é–‹é–‰",width:320,height:480,movable:!0,resizable:!0,appearanceName:"material",appearanceParam:{border:{shadow:"2px 2px 10px  rgba(0, 0, 0, 0.5)",width:0,radius:6},titleBar:{name:"diqt-dict-window-bar",color:"white",background:"#273132",leftMargin:16,height:30,fontSize:14,buttonWidth:36,buttonHeight:16,buttonColor:"white",buttons:[{fa:"fas fa-times",name:"closeButton",visible:!0}]}},style:{overflow:"auto"},html:o});r.setPosition(-20,100,["RIGHT_TOP"]),r.show();let d=document.querySelector("#diqt-dict-search-form");document.addEventListener("mouseup",(function(e){t(),e.stopPropagation()}),!1),(i=d).addEventListener("keyup",(function(){let e=i.value,t=document.querySelector("#diqt-dict-search-keyword").textContent;setTimeout((()=>{let i=document.querySelector("#diqt-dict-search-form").value;e==i&&e!=t&&e.length<1e3?n(e):e.length>=1e3&&(document.querySelector("#search-diqt-dict-results").innerHTML='<p style="color: #EE5A5A; font-size: 12px;">æ¤œç´¢ã§ãã‚‹ã®ã¯1000æ–‡å­—æœªæº€ã¾ã§ã§ã™ã€‚</p>')}),500)})),function(e){e.addEventListener("keydown",(function(e){"Enter"==e.key&&e.preventDefault()}))}(d),e=r.$("#diqt-dict-extension-wrapper"),e.parentNode.parentNode.parentNode.parentNode.parentNode.style.zIndex="2147483647",t(),function(){let e=chrome.runtime.connect({name:"inspectCurrentUser"});e.postMessage({action:"inspectCurrentUser"}),e.onMessage.addListener((function(e){let t=document.querySelector("#diqt-dict-logged-in-user");return e.data?chrome.storage.local.get(["diqtDictUserName"],(function(e){t.innerHTML=`<i class="fal fa-user"></i> ${e.diqtDictUserName} / è¨­å®š`})):t.innerHTML='<i class="fal fa-user"></i> ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹',!0})),document.querySelector("#diqt-dict-logged-in-user").addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{}))}))}()}else e.parentNode.parentNode.parentNode.parentNode.parentNode.remove();var i}function t(){const e=window.getSelection().toString();let t,i=document.querySelector("#diqt-dict-search-keyword");if(t=i?i.textContent:"",e.length>=1e3)document.querySelector("#search-diqt-dict-results").innerHTML='<p style="color: #EE5A5A; font-size: 12px;">æ¤œç´¢ã§ãã‚‹ã®ã¯1000æ–‡å­—æœªæº€ã¾ã§ã§ã™ã€‚</p>';else if(""!=e&&t!=e&&e.length<1e3){let t=document.querySelector("#diqt-dict-search-form");t&&(t.value=e,n(e))}}function n(e){let t;document.querySelector("#diqt-dict-search-keyword").textContent=e,e.length<50&&e.length>0?document.querySelector("#diqt-dict-search-status-text").textContent="ã®æ¤œç´¢çµæœ":document.querySelector("#diqt-dict-search-status-text").textContent="",document.querySelector("#search-diqt-dict-results").innerHTML='<div class="center"><div class="lds-ripple-diqt-dict"><div></div><div></div></div></div>',t=e.length>50?encodeURIComponent(e.slice(0,50)):encodeURIComponent(e);let r=chrome.runtime.connect({name:"search"});r.postMessage({action:"search",keyword:t}),r.onMessage.addListener((function(e){return function(e){let t=document.querySelector("#search-diqt-dict-results");t.innerHTML="";let r=e.words,d=e.dictionary;chrome.storage.local.get(["diqtDictToken"],(function(a){let g=a.diqtDictToken;if(null!=r){r.forEach((function(e,n,r){let d=function(e,t){let n=`https://www.diqt.net/ja/words/${e.id}`,o=`<div class="diqt-dict-entry">\n                                <span>${e.entry}</span><button class="diqt-dict-speech-btn"><i class="fas fa-volume-up"></i></button>\n                             </div>`,r=`<div class="diqt-dict-meaning">${p(e.meaning)}</div>`,d=function(e){return e.lang_number_of_entry==e.lang_number_of_meaning?`<div id="small-translation-buttons-word-${e.id}" style="padding-left: 4px;">\n                    <span class="diqt-google-translation-btn-wrapper">\n                        <a href="#" class="diqt-google-translation-btn" style="color: #27ae60;"><u>Googleç¿»è¨³</u></a>\n                    </span>\n                    <span >/</span>\n                    <span class="diqt-deepl-translation-btn-wrapper">\n                        <a href="#" class="diqt-deepl-translation-btn" style="color: #27ae60;"><u>DeepLç¿»è¨³</u></a>\n                    </span>\n                    <p class="diqt-google-translation-form"></p>\n                    <p class="diqt-deepl-translation-form"></p>\n                </div>`:""}(e),a=e.review,s=e.quiz.id;return o+r+d+`<div id="diqt-dict-review-btn-wrapper-${s}">${i(s,a,t)}</div>`+function(e,t){let n=e.sentence,o=e.sentence_quiz,r=e.sentence_review;if(null==n||null==o)return"";let d=`<div class="diqt-dict-explanation">${p(n.original)}</div>`,a=`<div class="diqt-dict-explanation">${n.translation}</div>`,s=o.id;return'<div style="text-align: left; margin-top: 16px"><div class="diqt-dict-label">ä¾‹æ–‡</div></div>'+d+a+`<div id="diqt-dict-review-btn-wrapper-${s}">${i(s,r,t)}</div>`+c(`https://www.diqt.net/ja/sentences/${n.id}`,"ã“ã®ä¾‹æ–‡ã‚’ç·¨é›†ã™ã‚‹")}(e,t)+c(n,"ã“ã®é …ç›®ã‚’ç·¨é›†ã™ã‚‹")+'<div style="width: 100%; height: 24px;"></div>'}(e,g);t.insertAdjacentHTML("beforeend",d),function(e,t){if(e.lang_number_of_entry==e.lang_number_of_meaning){let n=document.getElementById(`small-translation-buttons-word-${e.id}`),i=n.querySelector(".diqt-google-translation-btn"),o=n.querySelector(".diqt-google-translation-btn-wrapper"),r=n.querySelector(".diqt-google-translation-form");i.addEventListener("click",(function(){if(!t)return chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{})),!0;{o.innerHTML="<span>ç¿»è¨³ä¸­...</span>";let t=chrome.runtime.connect({name:"googleTranslation"});t.postMessage({action:"googleTranslation",keyword:e.meaning}),t.onMessage.addListener((function(e){let t=e.data;if(o.innerHTML="<span>å®Œäº†</span>","200"==t.status){let e=`<p style="font-size: 14px; color: #27ae60; margin-top: 24px;"><b>Googleç¿»è¨³ï¼š</b></p>\n                    <p style="font-size: 14px; color: #6e6e6e; margin-bottom: 16px;">${t.data.translation}</p>`;r.innerHTML=e}else r.innerHTML=`<a href="https://www.diqt.net/ja/select_plan" target="_blank" rel="noopener" style="font-size: 14px; color: #27ae60;">${t.message}</a>`;return!0}))}}));let d=n.querySelector(".diqt-deepl-translation-btn"),a=n.querySelector(".diqt-deepl-translation-btn-wrapper"),s=n.querySelector(".diqt-deepl-translation-form");d.addEventListener("click",(function(){if(!t)return chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{})),!0;{a.innerHTML="<span>ç¿»è¨³ä¸­...</span>";let t=chrome.runtime.connect({name:"deeplTranslation"});t.postMessage({action:"deeplTranslation",keyword:e.meaning}),t.onMessage.addListener((function(e){let t=e.data;if(a.innerHTML="<span>å®Œäº†</span>","200"==t.status){let e=`<p style="font-size: 14px; color: #27ae60; margin-top: 24px;"><b>DeepLç¿»è¨³ï¼š</b></p>\n                    <p style="font-size: 14px; color: #6e6e6e; margin-bottom: 16px;">${t.data.translation}</p>`;s.innerHTML=e}else s.innerHTML=`<a href="https://www.diqt.net/ja/select_plan" target="_blank" rel="noopener" style="font-size: 14px; color: #27ae60;">${t.message}</a>`;return!0}))}}))}}(e,g),o(e.quiz.id,e.review,g),e.sentence&&o(e.sentence_quiz.id,e.sentence_review,g)})),function(e){const t=e.querySelectorAll(".diqt-notation-link"),i=document.querySelector("#diqt-dict-search-form");t.forEach((function(e){e.addEventListener("click",(function(e){let t=e.target.dataset.value;return i.value!=t&&(i.value=t,n(t)),!1}))}))}(t),function(e){const t=e.querySelectorAll(".diqt-dict-speech-btn");speechSynthesis.getVoices(),t.forEach((function(e){e.addEventListener("click",(function(t){speechSynthesis.cancel();let n=e.previousElementSibling.textContent,i=new SpeechSynthesisUtterance,o=speechSynthesis.getVoices().find((function(e){return"Samantha"===e.name}));return i.voice=o,i.lang="en-US",i.volume=1,i.rate=1,i.pitch=1,i.text=n,speechSynthesis.speak(i),!1}))}))}(t);let e=document.querySelector("#diqt-dict-search-keyword").textContent;r[0].entry!=e?t.insertAdjacentHTML("beforeend",l(e,d)):t.insertAdjacentHTML("beforeend",function(e,t){return`<a href="https://www.diqt.net/ja/words/new?dictionary_id=${t.id}&text=${e}" target="_blank" rel="noopener" style="text-decoration: none;">\n                <div class="diqt-dict-review-btn" style="font-weight: bold;">è¾æ›¸ã«ç™»éŒ²ã™ã‚‹</div></a><a href="https://www.google.com/search?q=${e}+æ„å‘³&oq=${e}+æ„å‘³"" target="_blank" rel="noopener" style="text-decoration: none;">\n            <div class="diqt-dict-review-btn" style="font-weight: bold;">Webã§æ¤œç´¢ã™ã‚‹</div></a>`}(e,d));let a=s(g);t.insertAdjacentHTML("beforeend",a),u(g,e),console.log("Add tranlsation")}else if(null==e.status){let e='<div class="diqt-dict-meaning" style="margin: 24px 0;">å¤§å¤‰ç”³ã—è¨³ã”ã–ã„ã¾ã›ã‚“ã€‚è¾æ›¸ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚<a id="diqt-dict-option-btn" style="color: #27ae60;">ã“ã¡ã‚‰</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ãŸå¾Œã€å†ã³æ¤œç´¢ã—ã¦ãã ã•ã„ã€‚</div>';t.insertAdjacentHTML("afterbegin",e),document.querySelector("#diqt-dict-option-btn").addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{}))}))}else{let e=document.querySelector("#diqt-dict-search-keyword").textContent;e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;");let n="";e.length<50&&e.length>0&&(n=l(e,d));let i=n+s(g);t.insertAdjacentHTML("afterbegin",i),u(g,e)}}))}(e.data),!0}))}function i(e,t,n){return n?t?`<div class="diqt-dict-review-btn diqt-already-set" id="diqt-dict-review-edit-btn-${e}" style="font-weight: bold;"><i class="far fa-alarm-clock" style="margin-right: 4px;"></i>${r(t.interval_setting)}ã«å¾©ç¿’ã™ã‚‹</div>\n            <div class="diqt-dict-review-form" id="diqt-dict-review-form-${e}"></div>`:`<div class="diqt-dict-review-btn" id="diqt-dict-review-create-btn-${e}" style="font-weight: bold;"><i class="far fa-alarm-clock" style="margin-right: 4px;"></i>è¦šãˆã‚‹</div>`:`<div class="diqt-dict-review-btn" id="not-logged-in-review-btn-${e}" style="font-weight: bold;"><i class="far fa-alarm-clock" style="margin-right: 4px;"></i>è¦šãˆã‚‹</div></a>`}function o(e,t,n){n?t?a(e,t):d(e):function(e){let t=document.querySelector(`#not-logged-in-review-btn-${e}`);t&&t.addEventListener("click",(function(){return chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{})),!0}))}(e)}function r(e){let t="";switch(e=Number(e)){case 0:t="æ˜æ—¥";break;case 1:t="3æ—¥å¾Œ";break;case 2:t="ï¼‘é€±é–“å¾Œ";break;case 3:t="ï¼’é€±é–“å¾Œ";break;case 4:t="ï¼“é€±é–“å¾Œ";break;case 5:t="ï¼‘ãƒ¶æœˆå¾Œ";break;case 6:t="ï¼’ãƒ¶æœˆå¾Œ";break;case 7:t="ï¼“ãƒ¶æœˆå¾Œ";break;case 8:t="ï¼–ãƒ¶æœˆå¾Œ";break;case 9:t="1å¹´å¾Œ"}return t}function d(e){let t=document.querySelector(`#diqt-dict-review-create-btn-${e}`);t&&t.addEventListener("click",(function(){t.textContent="è¨­å®šä¸­...";let n=chrome.runtime.connect({name:"createReview"});n.postMessage({action:"createReview",quizId:e}),n.onMessage.addListener((function(n){let o=n.data;if("401"==o.status)return void(t.textContent=o.message);let r=o.review,d=i(e,r,"loggedIn");return document.querySelector(`#diqt-dict-review-btn-wrapper-${e}`).innerHTML=d,a(e,r),!0}))}))}function a(e,t){let n=document.querySelector(`#diqt-dict-review-edit-btn-${e}`);n&&n.addEventListener("click",(function(){!function(e,t){document.querySelector("#diqt-dict-review-form-"+e).innerHTML=function(e){let t=e.quiz_id;return`\n        <div class="boqqs-dict-reminder-status">\n        <p>å¾©ç¿’äºˆå®šï¼š${e.scheduled_date}</p>\n        <p>å¾©ç¿’è¨­å®šï¼š${r(e.interval_setting)}ã«å¾©ç¿’ã™ã‚‹</p>  \n        <div class="diqt-dict-destroy-review-btn" id="diqt-dict-destroy-review-btn-${t}"><i class="far fa-trash"></i> å¾©ç¿’è¨­å®šã‚’å‰Šé™¤ã™ã‚‹</div>\n        </div>      \n<div class="diqt-dict-select-form cp_sl01">\n<select id="diqt-dict-select-form-${t}" style="height: 40px;" required>\n\t${function(e){let t=0;e.interval_setting&&(t=Number(e.interval_setting));let n="";for(let i=0;i<10;i++){let o="";0!=i&&"false"==e.premium&&(o="ğŸ”’ "),n+=i==t?`<option value="${i}" selected>${o}${r(i)}ã«å¾©ç¿’ã™ã‚‹</option>`:`<option value="${i}">${o}${r(i)}ã«å¾©ç¿’ã™ã‚‹</option>`}return n}(e)}\n</select>\n</div>\n<button class="diqt-dict-submit-review-btn" id="diqt-dict-update-review-btn-${t}">è¨­å®šã™ã‚‹</button>\n<div class="diqt-dict-recommend-premium" id="diqt-dict-recommend-premium-${t}"></div>`}(t),function(e){let t=e.quiz_id;(function(e,t){let n=document.querySelector("#diqt-dict-update-review-btn-"+e);n.addEventListener("click",(function(){n.textContent="è¨­å®šä¸­...";let o=document.querySelector("#diqt-dict-select-form-"+e).value,r=chrome.runtime.connect({name:"updateReview"});r.postMessage({action:"updateReview",reviewId:t.id,settingNumber:o}),r.onMessage.addListener((function(t){let o=t.data;if("401"==o.status)return void(n.textContent=o.message);let r=o.review,d=i(e,r,"loggedIn");return document.querySelector(`#diqt-dict-review-btn-wrapper-${e}`).innerHTML=d,a(e,r),!0}))}))})(t,e),function(e,t){let n=document.querySelector(`#diqt-dict-destroy-review-btn-${e}`);n.addEventListener("click",(function(){n.textContent="è¨­å®šä¸­...";let o=chrome.runtime.connect({name:"destroyReview"});o.postMessage({action:"destroyReview",reviewId:t.id}),o.onMessage.addListener((function(t){if("401"==t.data.status)return void(n.textContent="401 error");let o=i(e,null,"loggedIn");return document.querySelector(`#diqt-dict-review-btn-wrapper-${e}`).innerHTML=o,d(e),!0}))}))}(t,e),0==e.premium&&function(e){const t=document.querySelector(`#diqt-dict-recommend-premium-${e}`),n=t.previousElementSibling,i=document.querySelector(`#diqt-dict-select-form-${e}`);let o=Number(i.value);const r='<p>ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¼šå“¡ã«ãªã‚‹ã“ã¨ã§ã€å¾©ç¿’ã‚’è‡ªç”±ã«è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼</p>\n    <a href="https://www.diqt.net/ja/select_plan" target="_blank" rel="noopener">\n    <button class="diqt-dict-submit-review-btn" style="width: 100%;"><i class="far fa-crown"></i> ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã‚’è¦‹ã‚‹</button>\n    </a>';0!=o&&(n.classList.add("hidden"),t.innerHTML=r),i.addEventListener("change",(function(){o=Number(this.value),0==o?(n.classList.remove("hidden"),t.innerHTML=""):(n.classList.add("hidden"),t.innerHTML=r)}))}(t)}(t)}(e,t)}))}function s(e){let t;return t=e?'<div id="diqt-dict-translation-form">\n        <div id="diqt-dict-google-translation"><div class="diqt-dict-review-btn" style="font-weight: bold;">Googleã§ç¿»è¨³ã™ã‚‹</div></div>\n        <div id="diqt-dict-deepl-translation"><div class="diqt-dict-review-btn" style="font-weight: bold;">DeepLã§ç¿»è¨³ã™ã‚‹</div></div>\n        </div>':'<div id="diqt-dict-translation-form">\n        <div id="diqt-dict-google-translation"><div class="diqt-dict-review-btn" style="font-weight: bold;">Googleã§ç¿»è¨³ã™ã‚‹</div></div>\n        <div id="diqt-dict-deepl-translation"><div class="diqt-dict-review-btn" style="font-weight: bold;">DeepLã§ç¿»è¨³ã™ã‚‹</div></div>\n        <p><a id="diqt-dict-login-for-translation" style="color: #27ae60;">ãƒ­ã‚°ã‚¤ãƒ³</a>ã™ã‚‹ã“ã¨ã§ã€æ©Ÿæ¢°ç¿»è¨³ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚</p>\n        </div>',t}function c(e,t){return`<div style="display: flex;">\n                    <a href="${e+"/edit"}" target="_blank" rel="noopener" class="diqt-dict-link-to-improve" style="margin-top: 0; margin-bottom: 8px; padding-top: 0; padding-bottom: 0;"><i class="fal fa-edit"></i>${t}</a>\n                    <a href="${e}" target="_blank" rel="noopener" class="diqt-dict-link-to-improve" style="margin-left: auto; margin-top: 0; margin-bottom: 8px; padding-top: 0; padding-bottom: 0;"><i class="fal fa-external-link" style="margin-right: 4px;"></i>è©³ç´°</a>\n                </div>`}function l(e,t){return`<div class="diqt-dict-meaning" style="margin: 24px 0;">${e}ã¯è¾æ›¸ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</div><a href="https://www.diqt.net/ja/words/new?dictionary_id=${t.id}&text=${e}" target="_blank" rel="noopener" style="text-decoration: none;">\n                <div class="diqt-dict-review-btn" style="font-weight: bold;">è¾æ›¸ã«ç™»éŒ²ã™ã‚‹</div></a><a href="https://www.google.com/search?q=${e}+æ„å‘³&oq=${e}+æ„å‘³"" target="_blank" rel="noopener" style="text-decoration: none;">\n            <div class="diqt-dict-review-btn" style="font-weight: bold;">Webã§æ¤œç´¢ã™ã‚‹</div></a>`}function u(e,t){const n=document.querySelector("#diqt-dict-google-translation"),i=document.querySelector("#diqt-dict-deepl-translation");e?(n.addEventListener("click",(function(){n.innerHTML='<div class="center"><div class="lds-ripple-diqt-dict"><div></div><div></div></div></div>';let e=chrome.runtime.connect({name:"googleTranslation"});e.postMessage({action:"googleTranslation",keyword:t}),e.onMessage.addListener((function(e){let t=e.data;if("200"==t.status){let e=`<p style="font-size: 14px; color: #27ae60; margin-top: 24px;"><b>Googleç¿»è¨³ï¼š</b></p>\n                    <p style="font-size: 14px; color: #6e6e6e; margin-bottom: 16px;">${t.data.translation}</p>`;n.innerHTML=e}else{let e=`<p style="margin: 24px 0;"><a href="https://www.diqt.net/ja/select_plan" target="_blank" rel="noopener" style="font-size: 14px; color: #27ae60;">${t.message}</a></p>`;n.innerHTML=e}return!0}))})),i.addEventListener("click",(function(){i.innerHTML='<div class="center"><div class="lds-ripple-diqt-dict"><div></div><div></div></div></div>';let e=chrome.runtime.connect({name:"deeplTranslation"});e.postMessage({action:"deeplTranslation",keyword:t}),e.onMessage.addListener((function(e){let t=e.data;if("200"==t.status){let e=`<p style="font-size: 14px; color: #27ae60; margin-top: 24px;"><b>DeepLç¿»è¨³ï¼š</b></p>\n                    <p style="font-size: 14px; color: #6e6e6e; margin-bottom: 16px;">${t.data.translation}</p>`;i.innerHTML=e}else{let e=`<p style="margin: 24px 0;"><a href="https://www.diqt.net/ja/select_plan" target="_blank" rel="noopener" style="font-size: 14px; color: #27ae60;">${t.message}</a></p>`;i.innerHTML=e}return!0}))}))):(n.addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{}))})),i.addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{}))})),document.querySelector("#diqt-dict-login-for-translation").addEventListener("click",(function(){chrome.runtime.sendMessage({action:"openOptionsPage"}).then((e=>{})).catch((e=>{}))})))}function p(e){let t=e.replace(/\r?\n/g,"<br>").split(/(\[{2}.*?\]{2})/),n=[];return t.forEach((function(e,t,i){if(null==e.match(/\[{2}.+\]{2}/))n.push(e);else{let t;t=null==(e=(e=e.replace(/\[{2}/g,"").replace(/\]{2}/g,"")).split(/\|/,2))[1]?`<a class="diqt-notation-link" data-value="${e[0]}">${e[0]}</a>`:`<a class="diqt-notation-link" data-value="${e[1]}">${e[0]}</a>`,n.push(t)}})),n.join("")}chrome.runtime.onMessage.addListener((function(t,n,i){switch(t){case"Action":e();break;case"Updated":chrome.storage.local.get(["diqtDictPopupDisplayed"],(function(t){if(!1===t.diqtDictPopupDisplayed||""===t.diqtDictPopupDisplayed)return;document.addEventListener("selectionchange",(()=>{const t=document.querySelector("#diqt-dict-extension-wrapper"),n=window.getSelection().toString();let i=document.querySelector("#diqt-dict-popup-to-display-window");if(i&&i.remove(),null==t&&""!=n){const t=window.getSelection().getRangeAt(0),n=document.createRange();if(0==t.endOffset)return;n.setStart(t.endContainer,t.endOffset-1),n.setEnd(t.endContainer,t.endOffset);const o=n.getBoundingClientRect();if(0==o.top&&0==o.left)return;const r=`<button id="diqt-dict-popup-to-display-window" style="position: absolute; width: 32px; height: 32px; background-color: #273132; top: ${window.pageYOffset+o.top+32}px; left: ${window.pageXOffset+o.left}px; z-index: 2147483647; border: 0; border-radius: 4px; padding: 0; margin: 0;">\n                    <img src="https://kawanji.s3.ap-northeast-1.amazonaws.com/assets/diqt_logo.svg" alt="diqt Icon" style="height: 24px;width: 24px; margin: 4px 2px 2px 3px; padding: 0;">\n                    </button>`;document.querySelector("html body").insertAdjacentHTML("beforeend",r),i=document.querySelector("button#diqt-dict-popup-to-display-window"),i.addEventListener("click",(function(){e(),i.remove()}))}}))}))}return!0})),document.addEventListener("keydown",(t=>{if(t.ctrlKey)switch(t.key){case"q":e()}}))})();